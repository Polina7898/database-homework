# Домашнее задание 1: Создание и нормализация базы данных

**Выполнила:** Кузнецова Полина

## Описание работы

В рамках этого домашнего задания я проанализировала предоставленные данные о клиентах и транзакциях, спроектировала и нормализовала структуру базы данных до третьей нормальной формы (3НФ).

## Структура проекта

- **`normalization_report.md`**: Подробное описание процесса нормализации с обоснованием каждого шага.
- **`database_diagram.dbml`**: Код для построения ER-диаграммы в dbdiagram.io.
- **`01_create_tables.sql`**: SQL-скрипт для создания таблиц в PostgreSQL.
- **`02_insert_data.sql`**: SQL-скрипт для загрузки данных с помощью команды `\COPY`.
- **`03_insert_data_alternative.sql`**: Альтернативный скрипт с примерами `INSERT INTO`.
- **Папка `data/`**: CSV-файлы с данными для загрузки (`locations.csv`, `products.csv`, `customers_norm.csv`, `transactions_norm.csv`).

## Схема базы данных

Итоговая схема состоит из четырех таблиц:

1.  **`locations`**: Справочник адресов (почтовый индекс, штат, страна).
2.  **`products`**: Справочник товаров (бренд, цена, характеристики).
3.  **`customers`**: Таблица с данными о клиентах.
4.  **`transactions`**: Таблица с данными о транзакциях.

Такая структура исключает избыточность и обеспечивает целостность данных.

## Как проверить работу

### 1. Посмотреть диаграмму

1.  Зайти на сайт https://dbdiagram.io/d
2.  Скопировать содержимое файла `database_diagram.dbml` и вставить в редактор.

### 2. Создать и заполнить базу данных в DBeaver

1.  Выполнить скрипт `01_create_tables.sql` для создания структуры БД.
2.  Выполнить скрипт `02_insert_data.sql` для загрузки данных. **Важно:** может потребоваться поменять пути к CSV-файлам в скрипте в зависимости от того, где они будут лежать на вашем компьютере.

### 3. Проверить количество строк

После загрузки можно выполнить этот запрос, чтобы убедиться, что все данные на месте:

```sql
SELECT 'locations' AS table_name, COUNT(*) AS row_count FROM locations
UNION ALL
SELECT 'products', COUNT(*) FROM products
UNION ALL
SELECT 'customers', COUNT(*) FROM customers
UNION ALL
SELECT 'transactions', COUNT(*) FROM transactions;
```

## Обоснование нормализации

Подробное описание того, как и почему база данных была приведена к 3НФ, находится в файле `normalization_report.md`.
